recursive-delete-patterns:
- BUILD
- "*/BUILD"
- BUILD.bazel
- "*/BUILD.bazel"
- Gopkg.toml
rules:
- destination: code-generator
  branches:
  - source:
      branch: go-mod-cleanup
      dir: staging/src/k8s.io/code-generator
    name: master
- destination: apimachinery
  library: true
  branches:
  - source:
      branch: go-mod-cleanup
      dir: staging/src/k8s.io/apimachinery
    name: master
- destination: api
  library: true
  branches:
  - source:
      branch: go-mod-cleanup
      dir: staging/src/k8s.io/api
    name: master
    dependencies:
    - repository: apimachinery
      branch: master
- destination: client-go
  library: true
  branches:
  - source:
      branch: go-mod-cleanup
      dir: staging/src/k8s.io/client-go
    name: master
    dependencies:
    - repository: apimachinery
      branch: master
    - repository: api
      branch: master
  smoke-test: |
    godep restore
    go build ./...
    go test $(go list ./... | grep -v /vendor/)
